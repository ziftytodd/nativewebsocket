{"version":3,"file":"plugin.cjs.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst NativeWebsocket = registerPlugin('NativeWebsocket', {\n    web: () => import('./web').then(m => new m.NativeWebsocketWeb()),\n});\nexport * from './definitions';\nexport { NativeWebsocket };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class NativeWebsocketWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.webSocket = null;\n    }\n    async connect(options) {\n        this.webSocket = new WebSocket(options.url);\n        this.webSocket.binaryType = 'arraybuffer';\n        this.webSocket.onopen = () => {\n            // Connected!\n            console.log('[NWS] Connected');\n            this.notifyListeners('connected', { connected: true });\n        };\n        this.webSocket.onmessage = async (msg) => {\n            // Got message\n            console.log('[NWS] Message received', msg);\n            if (msg.data instanceof ArrayBuffer) {\n                this.notifyListeners('message', { data: msg.data, binary: true });\n            }\n            else {\n                this.notifyListeners('message', { data: msg.data, binary: false });\n            }\n        };\n        this.webSocket.onerror = (err) => {\n            // Got error\n            console.log('[NWS] ERROR', err);\n            this.webSocket = null;\n            this.notifyListeners('disconnected', { reason: 'unknown', error: 'unknown' });\n        };\n        this.webSocket.onclose = (closed) => {\n            console.log('[NWS] Closed: ' + (closed ? closed.code : 'NoCode') + ' ' + (closed ? closed.reason : 'NoReason'));\n            this.webSocket = null;\n            this.notifyListeners('disconnected', { reason: 'disconnected', error: 'disconnected' });\n        };\n    }\n    async disconnect() {\n        if (this.webSocket) {\n            this.webSocket.close();\n            this.webSocket = null;\n        }\n        return { disconnected: true };\n    }\n    async send(options) {\n        console.log('[NWS] Send', options.message);\n        if (this.webSocket) {\n            this.webSocket.send(options.message);\n            return { sent: true };\n        }\n        return { sent: false };\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}